<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Car racing game prototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #222;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            touch-action: none;
        }
        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            max-width: 500px;
            margin: 0 auto;
            background: #333;
            overflow: hidden;
            border-left: 8px solid #555;
            border-right: 8px solid #555;
        }
        .road-line {
            position: absolute;
            width: 8px;
            height: 50px;
            background: #fff;
            left: 50%;
            transform: translateX(-50%);
        }
        .car {
            position: absolute;
            transition: transform 0.1s ease-out;
        }
        #score-board {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #fff;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px #000;
            z-index: 10;
        }
        #ui-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 100;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="score-board">Score: 0</div>
    
    <!-- Road lines will be generated by JS -->
    <div id="road-elements"></div>
    
    <!-- Player Car -->
    <div id="player" class="car" style="width: 50px; height: 90px; bottom: 50px; left: calc(50% - 25px);">
        <svg viewBox="0 0 50 90">
            <rect x="5" y="5" width="40" height="80" rx="8" fill="#e74c3c" />
            <rect x="10" y="15" width="30" height="20" rx="4" fill="#34495e" /> <!-- Windshield -->
            <rect x="10" y="55" width="30" height="15" rx="2" fill="#34495e" /> <!-- Rear window -->
            <rect x="2" y="10" width="6" height="15" rx="2" fill="#111" /> <!-- Wheels -->
            <rect x="42" y="10" width="6" height="15" rx="2" fill="#111" />
            <rect x="2" y="65" width="6" height="15" rx="2" fill="#111" />
            <rect x="42" y="65" width="6" height="15" rx="2" fill="#111" />
            <circle cx="12" cy="10" r="3" fill="#f1c40f" /> <!-- Headlights -->
            <circle cx="38" cy="10" r="3" fill="#f1c40f" />
        </svg>
    </div>

    <!-- UI Overlay -->
    <div id="ui-overlay">
        <h1 class="text-4xl font-black mb-4 tracking-tighter">CRAZY RACING</h1>
        <p class="mb-8 text-gray-400">Use Arrows or Tap Sides to Steer</p>
        <button id="start-btn" class="bg-red-600 hover:bg-red-500 text-white px-8 py-3 rounded-full font-bold text-xl transition-transform active:scale-95">
            START RACE
        </button>
    </div>
</div>

<script>
    const container = document.getElementById('game-container');
    const player = document.getElementById('player');
    const roadElements = document.getElementById('road-elements');
    const scoreBoard = document.getElementById('score-board');
    const uiOverlay = document.getElementById('ui-overlay');
    const startBtn = document.getElementById('start-btn');

    let gameActive = false;
    let score = 0;
    let speed = 5;
    let playerX = container.offsetWidth / 2 - 25;
    const playerWidth = 50;
    const playerHeight = 90;
    
    let keys = {};
    let enemies = [];
    let lines = [];

    // Initialize road lines
    function initRoad() {
        roadElements.innerHTML = '';
        lines = [];
        for (let i = 0; i < 10; i++) {
            const line = document.createElement('div');
            line.className = 'road-line';
            line.style.top = (i * 120) - 100 + 'px';
            roadElements.appendChild(line);
            lines.push(line);
        }
    }

    // Car SVG Generator
    function createEnemySVG(color) {
        return `
            <svg viewBox="0 0 50 90">
                <rect x="5" y="5" width="40" height="80" rx="8" fill="${color}" />
                <rect x="10" y="15" width="30" height="20" rx="4" fill="#34495e" />
                <rect x="10" y="55" width="30" height="15" rx="2" fill="#34495e" />
                <rect x="2" y="10" width="6" height="15" rx="2" fill="#111" />
                <rect x="42" y="10" width="6" height="15" rx="2" fill="#111" />
                <rect x="2" y="65" width="6" height="15" rx="2" fill="#111" />
                <rect x="42" y="65" width="6" height="15" rx="2" fill="#111" />
            </svg>
        `;
    }

    function spawnEnemy() {
        if (!gameActive) return;
        const enemy = document.createElement('div');
        enemy.className = 'car';
        const colors = ['#f1c40f', '#2ecc71', '#9b59b6', '#3498db'];
        const randomColor = colors[Math.floor(Math.random() * colors.length)];
        enemy.innerHTML = createEnemySVG(randomColor);
        enemy.style.width = '50px';
        enemy.style.height = '90px';
        
        const laneWidth = container.offsetWidth / 3;
        const lane = Math.floor(Math.random() * 3);
        const xPos = (lane * laneWidth) + (laneWidth/2) - 25;
        
        enemy.style.left = xPos + 'px';
        enemy.style.top = '-100px';
        container.appendChild(enemy);
        enemies.push({ element: enemy, y: -100, x: xPos });

        setTimeout(spawnEnemy, Math.max(800, 2000 - (score * 5)));
    }

    function update() {
        if (!gameActive) return;

        // Move road lines
        lines.forEach(line => {
            let top = parseFloat(line.style.top);
            top += speed;
            if (top > container.offsetHeight) top = -100;
            line.style.top = top + 'px';
        });

        // Move Player
        if ((keys.ArrowLeft || keys.leftPressed) && playerX > 10) playerX -= 7;
        if ((keys.ArrowRight || keys.rightPressed) && playerX < container.offsetWidth - 60) playerX += 7;
        player.style.left = playerX + 'px';

        // Move Enemies
        enemies.forEach((enemy, index) => {
            enemy.y += speed + 2;
            enemy.element.style.top = enemy.y + 'px';

            // Collision Check
            const pRect = player.getBoundingClientRect();
            const eRect = enemy.element.getBoundingClientRect();

            if (
                pRect.left < eRect.right &&
                pRect.right > eRect.left &&
                pRect.top < eRect.bottom &&
                pRect.bottom > eRect.top
            ) {
                gameOver();
            }

            // Remove off-screen enemies
            if (enemy.y > container.offsetHeight) {
                container.removeChild(enemy.element);
                enemies.splice(index, 1);
                score++;
                scoreBoard.innerText = `Score: ${score}`;
                if (score % 10 === 0) speed += 0.5;
            }
        });

        requestAnimationFrame(update);
    }

    function gameOver() {
        gameActive = false;
        uiOverlay.style.display = 'flex';
        uiOverlay.innerHTML = `
            <h1 class="text-5xl font-black mb-2 text-red-500">CRASHED!</h1>
            <p class="text-2xl mb-8">Final Score: ${score}</p>
            <button onclick="location.reload()" class="bg-white text-black px-8 py-3 rounded-full font-bold text-xl">RETRY</button>
        `;
    }

    function startGame() {
        uiOverlay.style.display = 'none';
        gameActive = true;
        score = 0;
        speed = 5;
        enemies.forEach(e => container.removeChild(e.element));
        enemies = [];
        initRoad();
        spawnEnemy();
        update();
    }

    // Controls
    window.addEventListener('keydown', e => keys[e.code] = true);
    window.addEventListener('keyup', e => keys[e.code] = false);

    // Touch Controls
    container.addEventListener('touchstart', e => {
        const touchX = e.touches[0].clientX;
        if (touchX < window.innerWidth / 2) keys.leftPressed = true;
        else keys.rightPressed = true;
    });
    container.addEventListener('touchend', () => {
        keys.leftPressed = false;
        keys.rightPressed = false;
    });

    startBtn.addEventListener('click', startGame);
    initRoad();
</script>

</body>
</html>


